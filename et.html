<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Notes App</title>
    <!-- React CDN Links -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.21.2/babel.min.js"></script>
    
    <style>
        * {
          box-sizing: border-box;
          margin: 0;
          padding: 0;
        }
        
        body {
          font-family: Arial, sans-serif;
          line-height: 1.6;
          padding: 20px;
          background-color: #f5f5f5;
        }
        
        .container {
          max-width: 800px;
          margin: 0 auto;
          padding: 20px;
          background-color: white;
          border-radius: 8px;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        h1, h2 {
          margin-bottom: 20px;
          color: #333;
        }
        
        input, textarea, button {
          padding: 10px;
          margin-bottom: 10px;
          border: 1px solid #ddd;
          border-radius: 4px;
          width: 100%;
        }
        
        button {
          background-color: #4285f4;
          color: white;
          cursor: pointer;
          font-weight: bold;
          border: none;
        }
        
        button:hover {
          background-color: #3367d6;
        }
        
        .item {
          padding: 15px;
          margin-bottom: 10px;
          background-color: #f9f9f9;
          border-radius: 4px;
          border-left: 3px solid #4285f4;
        }
        
        .item-actions {
          display: flex;
          justify-content: flex-end;
          gap: 10px;
          margin-top: 10px;
        }
        
        .item-actions button {
          width: auto;
          padding: 5px 10px;
        }
        
        .delete-btn {
          background-color: #f44336;
        }
        
        .delete-btn:hover {
          background-color: #d32f2f;
        }
        
        .edit-btn {
          background-color: #ffa000;
        }
        
        .edit-btn:hover {
          background-color: #ff8f00;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        // Helper functions for localStorage
        const LocalStorageService = {
          getAllNotes: () => {
            const notes = localStorage.getItem('notes');
            return notes ? JSON.parse(notes) : [];
          },
          
          saveNotes: (notes) => {
            localStorage.setItem('notes', JSON.stringify(notes));
          },
          
          addNote: (note) => {
            const notes = LocalStorageService.getAllNotes();
            const newNote = {
              id: Date.now(),
              text: note,
              createdAt: new Date().toISOString()
            };
            notes.push(newNote);
            LocalStorageService.saveNotes(notes);
            return newNote;
          },
          
          deleteNote: (id) => {
            const notes = LocalStorageService.getAllNotes();
            const filteredNotes = notes.filter(note => note.id !== id);
            LocalStorageService.saveNotes(filteredNotes);
          },
          
          updateNote: (id, newText) => {
            const notes = LocalStorageService.getAllNotes();
            const updatedNotes = notes.map(note => 
              note.id === id ? { ...note, text: newText, updatedAt: new Date().toISOString() } : note
            );
            LocalStorageService.saveNotes(updatedNotes);
          }
        };

        // Note Item Component
        const NoteItem = ({ note, onDelete, onEdit }) => {
          const [isEditing, setIsEditing] = React.useState(false);
          const [editText, setEditText] = React.useState(note.text);
          
          const handleSave = () => {
            onEdit(note.id, editText);
            setIsEditing(false);
          };
          
          const formatDate = (dateString) => {
            const options = { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' };
            return new Date(dateString).toLocaleDateString(undefined, options);
          };
          
          return (
            <div className="item">
              {isEditing ? (
                <>
                  <textarea 
                    value={editText} 
                    onChange={(e) => setEditText(e.target.value)}
                    rows="4"
                  />
                  <div className="item-actions">
                    <button onClick={handleSave}>Save</button>
                    <button className="delete-btn" onClick={() => setIsEditing(false)}>Cancel</button>
                  </div>
                </>
              ) : (
                <>
                  <p>{note.text}</p>
                  <small>Created: {formatDate(note.createdAt)}</small>
                  {note.updatedAt && <small> (Updated: {formatDate(note.updatedAt)})</small>}
                  <div className="item-actions">
                    <button className="edit-btn" onClick={() => setIsEditing(true)}>Edit</button>
                    <button className="delete-btn" onClick={() => onDelete(note.id)}>Delete</button>
                  </div>
                </>
              )}
            </div>
          );
        };

        // Main App Component
        const App = () => {
          const [notes, setNotes] = React.useState([]);
          const [newNote, setNewNote] = React.useState('');
          
          // Load notes from localStorage on component mount
          React.useEffect(() => {
            setNotes(LocalStorageService.getAllNotes());
          }, []);
          
          const handleAddNote = (e) => {
            e.preventDefault();
            if (newNote.trim() === '') return;
            
            const note = LocalStorageService.addNote(newNote);
            setNotes([...notes, note]);
            setNewNote('');
          };
          
          const handleDeleteNote = (id) => {
            LocalStorageService.deleteNote(id);
            setNotes(notes.filter(note => note.id !== id));
          };
          
          const handleEditNote = (id, newText) => {
            LocalStorageService.updateNote(id, newText);
            setNotes(notes.map(note => 
              note.id === id ? { ...note, text: newText, updatedAt: new Date().toISOString() } : note
            ));
          };
          
          return (
            <div className="container">
              <h1>React Notes App</h1>
              <p>Your notes are saved in your browser's local storage.</p>
              
              <form onSubmit={handleAddNote}>
                <h2>Add a New Note</h2>
                <textarea
                  rows="4"
                  value={newNote}
                  onChange={(e) => setNewNote(e.target.value)}
                  placeholder="Write your note here..."
                />
                <button type="submit">Save Note</button>
              </form>
              
              <h2>Your Notes ({notes.length})</h2>
              {notes.length === 0 ? (
                <p>No notes yet. Add your first note above.</p>
              ) : (
                notes.sort((a, b) => b.id - a.id).map(note => (
                  <NoteItem 
                    key={note.id} 
                    note={note} 
                    onDelete={handleDeleteNote}
                    onEdit={handleEditNote}
                  />
                ))
              )}
            </div>
          );
        };

              // Render the App
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>